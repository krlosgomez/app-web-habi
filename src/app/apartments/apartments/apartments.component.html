<div class="flex w-full justify-center">
  <div class="container w-full">
    <!-- Header -->
    <div class="py-5 px-3 bg-habi rounded-sm my-3 flex-row flex">
      <h1 class="text-xl font-bold text-white">Apartamentos</h1>
      <!-- Create button -->
      <a class="ml-auto flex-row flex bg-white px-3 rounded-md items-center text-purple-800 tooltip"
        routerLink="create">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z"
            clip-rule="evenodd" />
        </svg>
        <span class="font-bold">Crear</span>
        <span class="tooltiptext">Crear Apartamento</span>
      </a>
    </div>
    <!-- Table -->
    <div style="min-height: 80%;" class="max-w-full">
      <!-- Loading -->
      <span class="flex h-5 w-5 relative mx-auto" *ngIf="isLoadingPage; else showTable">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-800 opacity-75"></span>
        <span class="relative inline-flex rounded-full h-5 w-5 bg-habi"></span>
      </span>
      <ng-template #showTable>
        <!-- Table -->
        <table class="table-auto w-full border-collapse border border-slate-500 hover:border-collapse">
          <thead>
            <tr>
              <th class="border border-slate-600">Area</th>
              <th class="border border-slate-600"># Habitaciones</th>
              <th class="border border-slate-600">Presio</th>
              <th class="border border-slate-600">Dirección</th>
              <th class="border border-slate-600">Dueño</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngIf="isLoadingData; else showData">
              <td colspan="5">
                <span class="flex h-5 w-5 relative mx-auto">
                  <span
                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-800 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-5 w-5 bg-habi"></span>
                </span>
              </td>
            </tr>
            <ng-template #showData>
              <tr *ngFor="let apartment of apartments" class="text-center">
                <td class="border border-slate-700">{{apartment.area}} m<sup>2</sup></td>
                <td class="border border-slate-700">{{apartment.number_rooms}}</td>
                <td class="border border-slate-700">{{apartment.price | currency}}</td>
                <td class="border border-slate-700">{{apartment.address}} - {{apartment.location}} - {{apartment.city}}
                </td>
                <td class="border border-slate-700">{{apartment.owner?.name}}</td>
              </tr>
            </ng-template>
          </tbody>
        </table>
      </ng-template>
    </div>
    <!-- Pagination -->
    <div class="flex items-center space-x-1 mt-3 justify-center">
      <button class="flex items-center px-2 mr-1 text-gray-500 bg-gray-300 rounded-md"
        [ngClass]="{'hover:bg-purple-800 hover:text-white font-bold':filters.page > 1}" [disabled]="filters.page === 1"
        (click)="changePage(filters.page-1)">
        Anterior
      </button>
      <button class="px-2 mr-1 text-gray-700 bg-gray-200 rounded-md"
        [ngClass]="{'hover:bg-purple-800 hover:text-white font-bold': filters.page !== i + 1}"
        *ngFor="let page of pagesToShow; let i=index" (click)="changePage(i+1)" [disabled]="filters.page === page">
        {{page}}
      </button>
      <span class="px-2 mr-1" *ngIf="apartmentsResponse.pages > 3">...</span>
      <button href="#" class="px-2 mr-1 text-gray-500 bg-gray-300 rounded-md"
        [ngClass]="{'hover:bg-purple-800 hover:text-white font-bold':filters.page < apartmentsResponse.pages}"
        [disabled]="filters.page === apartmentsResponse.pages" (click)="changePage(filters.page+1)">
        Siguiente
      </button>
    </div>
  </div>
</div>
